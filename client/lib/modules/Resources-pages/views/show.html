{% extends 'apostrophe-templates:layout.html' %}
{% block extraBody %}
<script>
    $(document).on('click', 'a.previous-link', function () {
        parent.history.back();
        return false;
    });
</script>
<script src="/modules/shared-referal-module/js/searchReferral.js"></script>
{% endblock %}
{% set user_data = data.user_data %}
{% set rolesIds = data.rolesIds %}
{% set sluglist = data.sluglist %}

{% set piece = data.piece %}

{% block main %}
{% include "../../shared-referal-module/views/header.html" %}

<div id="resources_user" class="main-min-height">
    <div class="top-arrow-container" id="searchBar">
        <a href="" class="previous-link"> <img src="/modules/my-apostrophe-assets/img/Back.svg" class="leftArrow cursor-pointer"></a>
        <div class="resource_text"> {{ piece.title }}</div>
        <input hidden id="resources" value="{{data.piecesArray|dump}}">
        <div id="filter_content">
            <div class="input-group">
                <span class="input-group-prepend">
                    <div class="home-primarySearch-bg input-group-text  border-right-0 height-44">
                        <span style="color: #023047 !important;">
                            <i class="fal fa-search font-23"></i>
                        </span>
                    </div>
                </span>
                <input class="height-44 home-primarySearch-bg border-0 form-control py-2" type="search"
                    v-model="searchQuery" placeholder="Search your resource" id="example-search-input"
                    @input="filterPieces()">
            </div>
            {% raw %}
            <!-- Search functionality start-->
            <div v-if="showSearchResults" class="resource_search_text my-3">Search results for “what is
                {{searchQuery}}?”</div>
            <div v-if="showSearchResults" class="search-wrap primary-search-radius">
                <div class="primary-search-radius card cursor-pointer">

                    <div v-for="item in filteredData" class="border-bottom-primary card-body px-2 px-md-4">
                        <a :href=" item.custom_url ? `${item.custom_url}` : `${item._url}` ">
                            <div class="d-flex align-items-center">
                                <img src="/modules/my-apostrophe-assets/img/placeholder.svg" width="50" height="30"
                                    class="px-1 px-md-2 cursor-pointer" alt="">
                                <p class="question-font my-0 mx-2 mx-md-4"> {{item.title}}
                                </p>
                                <ul class="my-0 link-text mx-2 mx-md-4" style="list-style: inside !important;">
                                    <li>{{item.Topic}}</li>
                                </ul>
                            </div>
                        </a>
                    </div>
                </div>
            </div>
            <!-- Search functionality end-->
            {% endraw %}
        </div>
        <div class="text_inside_return">
            {{ piece.text }}
        </div>

        <!-- <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script> -->
    </div>
    <!-- Things to watch container -->
    {% if data.piece._watchPage and data.piece._watchPage.length%}
    <div
        class="swiper-container set-space-padding top-slider-cont-max">
        <div class="title-thing-to-watch">
            Things to watch
        </div>

        <!-- <div class="swiper-wrapper mb-4" id="swiper-wrapper-0010109b9815fb10cbf" aria-live="polite"
            style="transform: translate3d(-830px, 0px, 0px); transition-duration: 0ms;"> -->
            <div class="swiper-wrapper mb-4" id="swiper-wrapper-0010109b9815fb10cbf" aria-live="polite">
            {% for piecewatch in data.piece._watchPage %}
            <a href="{{piecewatch._parentUrl}}?piece_id={{piecewatch._id}}"
                class="swiper-slide bg-no border-radius-10 swiper-slide-next swiper-slide-duplicate-prev text-decoration-none"
                data-swiper-slide-index="1" role="group" style="width: 246.667px; margin-right: 30px;">
                <div class="w-100">
                    <div class="bg-white card-container-small">
                        <div class="container-top-set">
                            <div class="inside-cover-set">
                                <iframe class="img-placeholder m-b-min-8" style="width:100%;"
                                    src="{{ piecewatch.video }}" frameborder="0"
                                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                                    allowfullscreen></iframe>

                            </div>
                        </div>
                        <div class="container-bottom-set">
                            <div class="questionText">

                                {{ piecewatch.title}}
                            </div>
                            <div class="answerText ellipse-text-large-card">
                                {{ piecewatch.SubTitle}}

                            </div>

                        </div>
                    </div>
                </div>
            </a>
            {% endfor %}


        </div>
        <!-- Add Pagination -->
        <!-- <div class="swiper-pagination"></div>
        <div class="swiper-button-prev"></div>
        <div class="swiper-button-next"></div> -->
        <!-- <div class="swiper-pagination custom-pagination swiper-pagination-clickable swiper-pagination-bullets">
            <span class="swiper-pagination-bullet swiper-pagination-bullet-active" tabindex="0" role="button"
                aria-label="Go to slide 1"></span>
            <span class="swiper-pagination-bullet" tabindex="0" role="button" aria-label="Go to slide 2"></span>
        </div> -->
        <!-- Add Arrows -->
        <div class="swiper-button-next custom-control-next" tabindex="0" role="button" aria-label="Next slide"
            aria-controls="swiper-wrapper-81093574348bf1075e"></div>
        <div class="swiper-button-prev custom-control-prev" tabindex="0" role="button" aria-label="Previous slide"
            aria-controls="swiper-wrapper-81093574348bf1075e"></div>
            <div class="swiper-scrollbar"></div>
        <span class="swiper-notification" aria-live="assertive" aria-atomic="true"></span>
    </div>
    <!-- </div> -->
    {% endif %}
    <!-- Things to download container-->
    <div
        class="swiper-container set-space-padding top-slider-cont-max swiper-container-initialized swiper-container-horizontal">
        <div class="title-thing-to-watch">
            Things to download
        </div>
        <!-- <div class="swiper-wrapper mb-4" id="swiper-wrapper-1047c5a2bc9fc980" aria-live="polite"
            style="transform: translate3d(-553.333px, 0px, 0px); transition-duration: 0ms;"> -->
            <div class="swiper-wrapper mb-4" id="swiper-wrapper-1047c5a2bc9fc980" aria-live="polite">
            <div class="swiper-slide bg-no border-radius-10 swiper-slide-duplicate swiper-slide-duplicate-active"
                data-swiper-slide-index="0" role="group" aria-label="1 / 6"
                style="width: 246.667px; margin-right: 30px;">
                <div class="w-100">
                    <div class="bg-white card-container-small">
                        <div class="container-top-set">
                            <div class="inside-cover-set">
                                <img src="/modules/my-apostrophe-assets/img/Individual_ResourcePage_Button.svg"
                                    class="imageSet">
                            </div>
                        </div>
                        <div class="container-bottom-set">
                            <div class="questionText">
                                WYSA
                            </div>
                            <div class="answerText">
                                stress, depression &amp; anxiety therapy chatbot
                            </div>

                        </div>
                    </div>
                </div>
            </div>
            <div class="swiper-slide bg-no border-radius-10 swiper-slide-duplicate swiper-slide-prev swiper-slide-duplicate-next"
                data-swiper-slide-index="1" role="group" aria-label="2 / 6"
                style="width: 246.667px; margin-right: 30px;">
                <div class="w-100">
                    <div class="bg-white card-container-small">
                        <div class="container-top-set">
                            <div class="inside-cover-set">
                                <img src="/modules/my-apostrophe-assets/img/Individual_ResourcePage_Button.svg"
                                    class="imageSet">
                            </div>
                        </div>
                        <div class="container-bottom-set">
                            <div class="questionText">
                                Kooth
                            </div>
                            <div class="answerText">
                                Your online mental wellbeing community
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="swiper-slide bg-no border-radius-10 swiper-slide-active" data-swiper-slide-index="0"
                role="group" aria-label="3 / 6" style="width: 246.667px; margin-right: 30px;">
                <div class="w-100">
                    <div class="bg-white card-container-small">
                        <div class="container-top-set">
                            <div class="inside-cover-set">
                                <img src="/modules/my-apostrophe-assets/img/Individual_ResourcePage_Button.svg"
                                    class="imageSet">
                            </div>
                        </div>
                        <div class="container-bottom-set">
                            <div class="questionText">
                                WYSA
                            </div>
                            <div class="answerText">
                                stress, depression &amp; anxiety therapy chatbot
                            </div>

                        </div>
                    </div>
                </div>
            </div>
            <div class="swiper-slide bg-no border-radius-10 swiper-slide-next swiper-slide-duplicate-prev"
                data-swiper-slide-index="1" role="group" aria-label="4 / 6"
                style="width: 246.667px; margin-right: 30px;">
                <div class="w-100">
                    <div class="bg-white card-container-small">
                        <div class="container-top-set">
                            <div class="inside-cover-set">
                                <img src="/modules/my-apostrophe-assets/img/Individual_ResourcePage_Button.svg"
                                    class="imageSet">
                            </div>
                        </div>
                        <div class="container-bottom-set">
                            <div class="questionText">
                                Kooth
                            </div>
                            <div class="answerText">
                                Your online mental wellbeing community
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="swiper-slide bg-no border-radius-10 swiper-slide-duplicate swiper-slide-duplicate-active"
                data-swiper-slide-index="0" role="group" aria-label="5 / 6"
                style="width: 246.667px; margin-right: 30px;">
                <div class="w-100">
                    <div class="bg-white card-container-small">
                        <div class="container-top-set">
                            <div class="inside-cover-set">
                                <img src="/modules/my-apostrophe-assets/img/Individual_ResourcePage_Button.svg"
                                    class="imageSet">
                            </div>
                        </div>
                        <div class="container-bottom-set">
                            <div class="questionText">
                                WYSA
                            </div>
                            <div class="answerText">
                                stress, depression &amp; anxiety therapy chatbot
                            </div>

                        </div>
                    </div>
                </div>
            </div>
            <div class="swiper-slide bg-no border-radius-10 swiper-slide-duplicate swiper-slide-duplicate-next"
                data-swiper-slide-index="1" role="group" aria-label="6 / 6"
                style="width: 246.667px; margin-right: 30px;">
                <div class="w-100">
                    <div class="bg-white card-container-small">
                        <div class="container-top-set">
                            <div class="inside-cover-set">
                                <img src="/modules/my-apostrophe-assets/img/Individual_ResourcePage_Button.svg"
                                    class="imageSet">
                            </div>
                        </div>
                        <div class="container-bottom-set">
                            <div class="questionText">
                                Kooth
                            </div>
                            <div class="answerText">
                                Your online mental wellbeing community
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Add Pagination -->
        <!-- <div class="swiper-pagination custom-pagination swiper-pagination-clickable swiper-pagination-bullets"><span
                class="swiper-pagination-bullet swiper-pagination-bullet-active" tabindex="0" role="button"
                aria-label="Go to slide 1"></span><span class="swiper-pagination-bullet" tabindex="0" role="button"
                aria-label="Go to slide 2"></span></div> -->
        <!-- Add Arrows -->
        <div class="swiper-button-next custom-control-next" tabindex="0" role="button" aria-label="Next slide"
            aria-controls="swiper-wrapper-1047c5a2bc9fc980"></div>
        <div class="swiper-button-prev custom-control-prev" tabindex="0" role="button" aria-label="Previous slide"
            aria-controls="swiper-wrapper-1047c5a2bc9fc980"></div>
            <div class="swiper-scrollbar"></div>
        <span class="swiper-notification" aria-live="assertive" aria-atomic="true"></span>
    </div>


    <!-- Things to read container -->
    {% if data.piece._readPage and data.piece._readPage.length%}

    <div
        class="swiper-container set-space-padding top-slider-cont-max swiper-container-initialized swiper-container-horizontal">
        <div class="title-thing-to-watch">
            Things to read
        </div>
        <!-- <div class="swiper-wrapper mb-4" id="swiper-wrapper-9f48a110e307a6101b" aria-live="polite"
            style="transform: translate3d(-830px, 0px, 0px); transition-duration: 0ms;"> -->
            <div class="swiper-wrapper mb-4" id="swiper-wrapper-9f48a110e307a6101b" aria-live="polite">
            {% for pieceread in data.piece._readPage %}

            <a href="{{pieceread._parentUrl}}?piece_id={{pieceread._id}}"
                class="swiper-slide bg-no border-radius-10 swiper-slide-next swiper-slide-duplicate-prev text-decoration-none"
                data-swiper-slide-index="1" role="group" style="width: 246.667px; margin-right: 30px;">
                <div class="w-100">
                    <div class="bg-white card-container-small">
                        <div class="container-top-set">
                            <div class="inside-cover-set">
                                {% if apos.images.first(pieceread.thumbnail) %}
                                {% set img = apos.images.first(pieceread.thumbnail) %}
                                {% endif %}
                                {% if img %}
                                <img class="imageSet" style="height: 140px;"
                                    src="{{ apos.attachments.url(img, { size: 'max' }) }}">
                                {% endif %}
                                <!-- <img src="/modules/my-apostrophe-assets/img/Individual_ResourcePage_Button.svg" class="imageSet"> -->
                            </div>
                        </div>
                        <div class="container-bottom-set">
                            <div class="questionText">
                                {{ pieceread.title }}
                            </div>
                            <div class="answerText ellipse-text-large-card">
                                {{ pieceread.read_topic}}
                            </div>
                        </div>
                    </div>
                </div>
            </a>
            {% endfor %}




        </div>
        <!-- Add Pagination -->
        <!-- <div class="swiper-pagination custom-pagination swiper-pagination-clickable swiper-pagination-bullets"><span
                class="swiper-pagination-bullet swiper-pagination-bullet-active" tabindex="0" role="button"
                aria-label="Go to slide 1"></span><span class="swiper-pagination-bullet" tabindex="0" role="button"
                aria-label="Go to slide 2"></span></div> -->
        <!-- Add Arrows -->
        <div class="swiper-button-next custom-control-next" tabindex="0" role="button" aria-label="Next slide"
            aria-controls="swiper-wrapper-9f48a110e307a6101b"></div>
        <div class="swiper-button-prev custom-control-prev" tabindex="0" role="button" aria-label="Previous slide"
            aria-controls="swiper-wrapper-9f48a110e307a6101b"></div>
            <div class="swiper-scrollbar"></div>
        <span class="swiper-notification" aria-live="assertive" aria-atomic="true"></span>
    </div>
    {% endif %}




    <!-- Event container -->
    {% if data.piece._eventPage and data.piece._eventPage.length %}
    <div
        class="swiper-container set-space-padding top-slider-cont-max swiper-container-initialized swiper-container-horizontal">
        <div class="title-thing-to-watch">
            Events
        </div>
        <!-- <div class="swiper-wrapper mb-4" id="swiper-wrapper-9f48a110e307a6101b" aria-live="polite"
            style="transform: translate3d(-830px, 0px, 0px); transition-duration: 0ms;"> -->
            <div class="swiper-wrapper mb-4" id="swiper-wrapper-9f48a110e307a6101b" aria-live="polite">
            {% for pieceevents in data.piece._eventPage %}

            <a href="{{pieceevents._parentUrl}}?piece_id={{pieceevents._id}}"
                class="swiper-slide bg-no border-radius-10 swiper-slide-next swiper-slide-duplicate-prev text-decoration-none"
                data-swiper-slide-index="1" role="group" style="width: 246.667px; margin-right: 30px;">
                <div class="w-100">
                    <div class="bg-white card-container-small">
                        <div class="container-top-set">
                            <div class="inside-cover-set">
                                {% if apos.images.first(pieceevents.thumbnail) %}
                                {% set img = apos.images.first(pieceevents.thumbnail) %}
                                {% endif %}
                                {% if img %}
                                <img class="imageSet" style="height: 140px;"
                                    src="{{ apos.attachments.url(img, { size: 'max' }) }}">
                                {% endif %}
                                <!-- <img src="/modules/my-apostrophe-assets/img/Individual_ResourcePage_Button.svg" class="imageSet"> -->
                            </div>
                        </div>
                        <div class="container-bottom-set">
                            <div class="questionText">
                                {{ pieceevents.title}}
                            </div>
                        </div>
                    </div>
                </div>
            </a>
            {% endfor %}




        </div>
        <!-- Add Pagination -->
        <!-- <div class="swiper-pagination custom-pagination swiper-pagination-clickable swiper-pagination-bullets"><span
                class="swiper-pagination-bullet swiper-pagination-bullet-active" tabindex="0" role="button"
                aria-label="Go to slide 1"></span><span class="swiper-pagination-bullet" tabindex="0" role="button"
                aria-label="Go to slide 2"></span></div> -->
        <!-- Add Arrows -->
        <div class="swiper-button-next custom-control-next" tabindex="0" role="button" aria-label="Next slide"
            aria-controls="swiper-wrapper-9f48a110e307a6101b"></div>
        <div class="swiper-button-prev custom-control-prev" tabindex="0" role="button" aria-label="Previous slide"
            aria-controls="swiper-wrapper-9f48a110e307a6101b"></div>
            <div class="swiper-scrollbar"></div>
        <span class="swiper-notification" aria-live="assertive" aria-atomic="true"></span>
    </div>
    {% endif %}

    <!-- Games container -->
    {% if data.piece._gamesPage and data.piece._gamesPage.length%}

    <div
        class="swiper-container set-space-padding top-slider-cont-max swiper-container-initialized swiper-container-horizontal">
        <div class="title-thing-to-watch">
            Games
        </div>
        <!-- <div class="swiper-wrapper mb-4" id="swiper-wrapper-32e10f67fb35007cd" aria-live="polite"
            style="transform: translate3d(-553.333px, 0px, 0px); transition-duration: 0ms;"> -->
            <div class="swiper-wrapper mb-4" id="swiper-wrapper-32e10f67fb35007cd" aria-live="polite">
            {% for piecegames in data.piece._gamesPage %}

            <a href="{{ piecegames._parentUrl}}?piece_id={{piecegames._id}}"
                class="swiper-slide bg-no border-radius-10 swiper-slide-next swiper-slide-duplicate-prev text-decoration-none"
                data-swiper-slide-index="0" role="group" aria-label="1 / 6"
                style="width: 246.667px; margin-right: 30px;">
                <div class="w-100">
                    <div class="bg-white card-container-small">
                        <div class="container-top-set">
                            <div class="inside-cover-set">
                                {% if apos.images.first(piecegames.thumbnail) %}
                                {% set img = apos.images.first(piecegames.thumbnail) %}
                                {% endif %}
                                {% if img %}
                                <img class="imageSet" style="height: 140px;"
                                    src="{{ apos.attachments.url(img, { size: 'max' }) }}">
                                {% endif %}
                                <!-- <img src="/modules/my-apostrophe-assets/img/Individual_ResourcePage_Button.svg" class="imageSet"> -->
                            </div>
                        </div>
                        <div class="container-bottom-set">
                            <div class="questionText">
                                {{ piecegames.title}}
                            </div>
                        </div>
                    </div>
                </div>
            </a>
            {% endfor %}

        </div>
        <!-- Add Pagination -->
        <!-- <div class="swiper-pagination custom-pagination swiper-pagination-clickable swiper-pagination-bullets"><span
                class="swiper-pagination-bullet swiper-pagination-bullet-active" tabindex="0" role="button"
                aria-label="Go to slide 1"></span><span class="swiper-pagination-bullet" tabindex="0" role="button"
                aria-label="Go to slide 2"></span></div> -->
        <!-- Add Arrows -->
        <div class="swiper-button-next custom-control-next" tabindex="0" role="button" aria-label="Next slide"
            aria-controls="swiper-wrapper-32e10f67fb35007cd"></div>
        <div class="swiper-button-prev custom-control-prev" tabindex="0" role="button" aria-label="Previous slide"
            aria-controls="swiper-wrapper-32e10f67fb35007cd"></div>
            <div class="swiper-scrollbar"></div>
        <span class="swiper-notification" aria-live="assertive" aria-atomic="true"></span>
    </div>
    {% endif %}

    <!-- Partner agencies container-->
    {% if data.piece._partnerAgenciesPage and data.piece._partnerAgenciesPage.length%}

    <div
        class="swiper-container set-space-padding top-slider-cont-max swiper-container-initialized swiper-container-horizontal">
        <div class="title-thing-to-watch">
            Partner agencies
        </div>
        <!-- <div class="swiper-wrapper mb-4" id="swiper-wrapper-81407d8d9af8433d" aria-live="polite"
            style="transform: translate3d(-553.333px, 0px, 0px); transition-duration: 0ms;"> -->
            <div class="swiper-wrapper mb-4" id="swiper-wrapper-81407d8d9af8433d" aria-live="polite">

            {% for piecepartner in data.piece._partnerAgenciesPage %}

            <a href="{{ piecepartner._parentUrl}}?piece_id={{piecepartner._id}}"
                class="swiper-slide bg-no border-radius-10 swiper-slide-next swiper-slide-duplicate-prev text-decoration-none"
                data-swiper-slide-index="0" role="group" aria-label="1 / 6"
                style="width: 246.667px; margin-right: 30px;">
                <div class="w-100">
                    <div class="bg-white card-container-small">
                        <div class="container-top-set">
                            <div class="inside-cover-set">
                                {% if apos.images.first(piecepartner.thumbnail) %}
                                {% set img = apos.images.first(piecepartner.thumbnail) %}
                                {% endif %}
                                {% if img %}
                                <img class="imageSet" style="height: 140px;"
                                    src="{{ apos.attachments.url(img, { size: 'max' }) }}">
                                {% endif %}
                                <!-- <img src="/modules/my-apostrophe-assets/img/Individual_ResourcePage_Button.svg" class="imageSet"> -->
                            </div>
                        </div>
                        <div class="container-bottom-set">
                            <div class="questionText">
                                {{ piecepartner.title}}

                            </div>
                            <div class="answerText ellipse-text-large-card">
                                {{ piecepartner.partnerAgencies}}

                            </div>

                        </div>
                    </div>
                </div>
            </a>
            {% endfor %}



        </div>
        <!-- Add Pagination -->
        <!-- <div class="swiper-pagination custom-pagination swiper-pagination-clickable swiper-pagination-bullets"><span
                class="swiper-pagination-bullet swiper-pagination-bullet-active" tabindex="0" role="button"
                aria-label="Go to slide 1"></span><span class="swiper-pagination-bullet" tabindex="0" role="button"
                aria-label="Go to slide 2"></span></div> -->
        <!-- Add Arrows -->
        <div class="swiper-button-next custom-control-next" tabindex="0" role="button" aria-label="Next slide"
            aria-controls="swiper-wrapper-81407d8d9af8433d"></div>
        <div class="swiper-button-prev custom-control-prev" tabindex="0" role="button" aria-label="Previous slide"
            aria-controls="swiper-wrapper-81407d8d9af8433d"></div>
            <div class="swiper-scrollbar"></div>
        <span class="swiper-notification" aria-live="assertive" aria-atomic="true"></span>
    </div>
    </div>
    {% endif %}

    <!-- Initialize Swiper -->
     <!-- <script>
        $(document).on('click', 'a.previous-link', function () {
            parent.history.back();
            return false;
        });
        var swiper = new Swiper('.swiper-container', {
            direction: 'horizontal',
            loop: true,
            loopedSlides: 0,
            slidesPerView: '3',
            slidesOffsetAfter:10,
            spaceBetween: 10,
            grabCursor: true,

            pagination: {
                el: '.swiper-pagination',
                clickable: true,
            },
            nextButton: '.swiper-button-next',
            prevButton: '.swiper-button-prev',
            scrollbar: '.swiper-scrollbar',
            breakpoints: {
                1024: {
                    spaceBetween: 10,
                    slidesPerView: 3,

                },
                992: {
                    spaceBetween: 10,
                    slidesPerView: 2,

                },
                768: {
                    spaceBetween: 10,
                    slidesPerView: 2,

                },
                600: {
                    spaceBetween: 10,
                    slidesPerView: 2,

                },
                424: {
                    spaceBetween: 10,
                    slidesPerView: 1,

                },

            }
        });
    </script> -->
    {% include "../../shared-referal-module/views/searchReferral.html" %}
    {% include "../../shared-referal-module/views/company.html" %}

{% endblock %}
